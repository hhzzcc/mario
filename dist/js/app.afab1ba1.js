(function(i){function t(t){for(var n,d,r=t[0],u=t[1],l=t[2],y=0,h=[];y<r.length;y++)d=r[y],Object.prototype.hasOwnProperty.call(a,d)&&a[d]&&h.push(a[d][0]),a[d]=0;for(n in u)Object.prototype.hasOwnProperty.call(u,n)&&(i[n]=u[n]);o&&o(t);while(h.length)h.shift()();return s.push.apply(s,l||[]),e()}function e(){for(var i,t=0;t<s.length;t++){for(var e=s[t],n=!0,r=1;r<e.length;r++){var u=e[r];0!==a[u]&&(n=!1)}n&&(s.splice(t--,1),i=d(d.s=e[0]))}return i}var n={},a={app:0},s=[];function d(t){if(n[t])return n[t].exports;var e=n[t]={i:t,l:!1,exports:{}};return i[t].call(e.exports,e,e.exports,d),e.l=!0,e.exports}d.m=i,d.c=n,d.d=function(i,t,e){d.o(i,t)||Object.defineProperty(i,t,{enumerable:!0,get:e})},d.r=function(i){"undefined"!==typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(i,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(i,"__esModule",{value:!0})},d.t=function(i,t){if(1&t&&(i=d(i)),8&t)return i;if(4&t&&"object"===typeof i&&i&&i.__esModule)return i;var e=Object.create(null);if(d.r(e),Object.defineProperty(e,"default",{enumerable:!0,value:i}),2&t&&"string"!=typeof i)for(var n in i)d.d(e,n,function(t){return i[t]}.bind(null,n));return e},d.n=function(i){var t=i&&i.__esModule?function(){return i["default"]}:function(){return i};return d.d(t,"a",t),t},d.o=function(i,t){return Object.prototype.hasOwnProperty.call(i,t)},d.p="/mario/dist/";var r=window["webpackJsonp"]=window["webpackJsonp"]||[],u=r.push.bind(r);r.push=t,r=r.slice();for(var l=0;l<r.length;l++)t(r[l]);var o=u;s.push([0,"chunk-vendors"]),e()})({0:function(i,t,e){i.exports=e("56d7")},"034f":function(i,t,e){"use strict";e("85ec")},"2cf9":function(i,t,e){"use strict";e("968f")},"2fd3":function(i,t,e){},"351e":function(i,t,e){},"3ab0":function(i,t,e){"use strict";e("2fd3")},4576:function(i,t,e){"use strict";e("e81c")},"4dc7":function(i,t,e){"use strict";e("351e")},"56d7":function(i,t,e){"use strict";e.r(t);e("e260"),e("e6cf"),e("cca6"),e("a79d");var n=e("2b0e"),a=function(){var i=this,t=i.$createElement,e=i._self._c||t;return e("div",{attrs:{id:"app"}},[e("router-view")],1)},s=[],d=(e("034f"),e("2877")),r={},u=Object(d["a"])(r,a,s,!1,null,null,null),l=u.exports,o=e("8c4f"),y=function(){var i=this,t=i.$createElement,e=i._self._c||t;return e("div",{staticClass:"home"},[e("Editor",{attrs:{camera:i.camera,fps:i.fps,loaded:i.ableLoadedEditor,cameraX:i.camera?i.camera.x:0,cameraY:i.camera?i.camera.y:0,staticSprites:i.physical?i.physical.staticSprites:{}},on:{load:i.handleLoad,start:i.handleStart,"edit-start":i.handleEditStart,edit:i.handleEdit,"edit-end":i.handleEditEnd,"page-prev":i.handlePagePrev,"page-next":i.handlePageNext}})],1)},h=[],p=(e("99af"),e("d81d"),e("07ac"),e("2909")),c=e("d4ec"),g=e("bee2"),b=function(){function i(t){Object(c["a"])(this,i);var e=t.x,n=t.y,a=t.w,s=t.h;this.x=e,this.y=n,this.w=a,this.h=s}return Object(g["a"])(i,[{key:"translate",value:function(i){var t=i.x,e=i.y;this.x+=t||0,this.y+=e||0}},{key:"isInView",value:function(i){var t=this.x,e=this.y,n=this.w,a=this.h;return i.x+i.w>=t&&i.x<=t+n&&i.y+i.h>=e&&i.y<=e+a}}]),i}(),m=(e("a434"),function(){function i(t){Object(c["a"])(this,i);var e=t.x,n=t.y,a=t.w,s=t.h,d=t.backgroundImage;this.x=e||0,this.y=n||0,this.w=a,this.h=s,this.backgroundImage=d,this.sprites=[]}return Object(g["a"])(i,[{key:"add",value:function(i){for(var t=0;t<i.length;t++){var e=i[t];if(e){for(var n=0;n<this.sprites.length;n++){var a=this.sprites[n];if(e.x===a.x&&e.y===a.y&&a.ableBeCover){a.remove();break}}this.sprites.push(e),e.sprites.length&&this.add(e.sprites)}}}},{key:"remove",value:function(i){if(i)for(var t=0;t<this.sprites.length;t++)if(i===this.sprites[t]){this.sprites.splice(t,1);break}}},{key:"clear",value:function(){this.sprites=[]}}]),i}()),x=function(){function i(t){Object(c["a"])(this,i);var e=t.canvas,n=t.camera,a=t.scene,s=t.physical;this.canvas=e,this.ctx=this.canvas.getContext("2d"),this.camera=n,this.scene=a,this.physical=s,this.screenCanvas=document.createElement("canvas"),this.screenCanvas.width=a.w,this.screenCanvas.height=a.h,this.screenCtx=this.screenCanvas.getContext("2d")}return Object(g["a"])(i,[{key:"renderCamera",value:function(i,t,e){var n=~~(i.x/i.w);e.drawImage(t.backgroundImage,0,0,i.w,i.h,n*i.w,0,i.w,i.h),e.drawImage(t.backgroundImage,0,0,i.w,i.h,(n+1)*i.w,0,i.w,i.h)}},{key:"renderScene",value:function(i,t,e,n){for(var a=t.sprites,s=0;s<a.length;s++){var d=a[s];if(i.isInView(d))if(d.isRemove)t.remove(d),s--;else{d.frameWorkCallback(t,i,e);var r=d.run(),u=r.w,l=r.h,o=r.x,y=r.y,h=r.image;d.isCrop?n.drawImage(h,0,0,u,l,o,y,u,l):n.drawImage(h,o,y,u,l)}else d.isOverflowRemove&&d.remove()}}},{key:"renderCanvas",value:function(i,t,e){var n=i.x,a=i.y,s=i.w,d=i.h;t.clearRect(0,0,s,d),t.drawImage(e,n,a,s,d,0,0,s,d)}},{key:"render",value:function(){var i=this.camera,t=this.scene,e=this.physical,n=this.screenCanvas,a=this.screenCtx,s=this.ctx;this.renderCamera(i,t,a),this.renderScene(i,t,e,a),this.renderCanvas(i,s,n)}}]),i}(),f=(e("caad"),e("2532"),e("262e")),v=e("2caf"),L=function(){function i(t){Object(c["a"])(this,i);var e=t.x,n=t.y,a=t.w,s=t.h,d=t.images,r=t.frameDelay,u=void 0===r?.1:r,l=t.frameCount,o=void 0===l?0:l,y=t.isCrop,h=void 0!==y&&y;this.x=e,this.y=n,this.w=a,this.h=s,this.images=d,this.beginX=e,this.beginY=n,this.beginW=a,this.beginH=s,this.frameDelay=u,this.frameCount=o,this.isOverflowRemove=!1,this.isRemoveBefore=!1,this.isRemove=!1,this.isCrop=h,this.ablePhysical=!0,this.ableBeCover=!1,this.sprites=[]}return Object(g["a"])(i,[{key:"run",value:function(){var i=this.x,t=this.y,e=this.w,n=this.h;this.frameCount=this.frameCount>=this.images.length-1?0:this.frameCount+this.frameDelay;var a=this.images[~~this.frameCount];return{x:i,y:t,w:e,h:n,image:a,sprite:this}}},{key:"wellRemove",value:function(){this.isRemoveBefore=!0}},{key:"remove",value:function(){this.isRemoveBefore=!0,this.isRemove=!0}},{key:"frameWorkCallback",value:function(){}}]),i}(),k={g:9.8,v0:10,personOffset:192,unit:32},w=function(i){Object(f["a"])(e,i);var t=Object(v["a"])(e);function e(i){var n;Object(c["a"])(this,e);var a=i.images,s=i.x,d=i.y,r=i.w,u=void 0===r?16:r,l=i.h,o=void 0===l?16:l,y=i.vx,h=void 0===y?4:y;return n=t.call(this,{images:a,x:s,y:d,w:u,h:o}),n.vx=h,n.vy=0,n.maxJump=10,n.ableOverflowHidden=!0,n.type="bullet",n}return Object(g["a"])(e,[{key:"handleMove",value:function(){this.x+=this.vx,this.y+=this.vy}}]),e}(L),O=function(i){Object(f["a"])(e,i);var t=Object(v["a"])(e);function e(i){var n;Object(c["a"])(this,e);var a=i.allImages,s=i.x,d=i.y,r=i.w,u=void 0===r?k.unit:r,l=i.h,o=void 0===l?k.unit:l;return n=t.call(this,{x:s,y:d,w:u,h:o}),n.allImages=a,n.vTop=-4,n.vLeft=-4,n.vRight=4,n.vx=0,n.vy=0,n.isAbleDoTop=!0,n.personType="base",n.type="person",n}return Object(g["a"])(e,[{key:"growToBig",value:function(){"big"!==this.personType&&"bullet"!=this.personType&&(this.y-=this.h,this.h=2*this.h,this.personType="big")}},{key:"growToBullet",value:function(){"bullet"!==this.personType&&("base"===this.personType&&(this.y-=this.h,this.h=2*this.h),this.personType="bullet")}},{key:"clear",value:function(){this.x=this.beginX,this.y=this.beginY,this.w=this.beginW,this.h=this.beginH,this.personType="base"}},{key:"shrink",value:function(){"base"!==this.personType&&(this.w=this.beginW,this.h=this.beginH,this.y+=this.h,this.personType="base")}},{key:"handleMove",value:function(){this.x+=this.vx,this.y+=this.vy}},{key:"handleRunType",value:function(){var i="Static";this.isDoTop&&this.isAbleDoTop&&(i="TopRight"),this.isDoLeft&&(i=this.isDoTop?"TopLeft":"Left"),this.isDoRight&&(i=this.isDoTop?"TopRight":"Right"),this.runType=i}},{key:"handleFire",value:function(i,t){if(this.isDoBullet&&"bullet"===this.personType&&(this.runType=this.runType.includes("Left")?"BulletLeft":"BulletRight",!this.timmer||Date.now()-this.timmer>200)){var e=this.runType.includes("Left"),n=new w({x:this.x+(e?-.5:1)*this.w,y:this.y,w:16,h:16,vx:6*(e?-1:1),images:this.allImages.bullet});i.add([n]),t.addDynamicSprite([n]),this.timmer=Date.now()}}},{key:"handleDeath",value:function(){this.isDeath&&(runType="Death")}},{key:"update",value:function(){this.images=this.allImages["".concat(this.personType,"Person").concat(this.runType)]}},{key:"frameWorkCallback",value:function(i,t,e){this.handleRunType(),this.handleFire(i,e),this.handleDeath(),this.update()}}]),e}(L),z=(e("4160"),e("159b"),function(i,t){return i.y+i.vy>t.y&&i.y+i.vy<t.y+t.h&&i.x!==t.x-i.w&&i.x!==t.x+t.w}),j=function(i,t){return i.y+i.h+i.vy>t.y&&i.y+i.h+i.vy<t.y+t.h&&i.x!==t.x-i.w&&i.x!==t.x+t.w},S=function(i,t){return i.x+i.w+i.vx>t.x&&i.x+i.w+i.vx<t.x+t.w&&i.y!==t.y-i.h&&i.y!==t.y+t.h},R=function(i,t){return i.x+i.vx>t.x&&i.x+i.vx<t.x+t.w&&i.y!==t.y-i.h&&i.y!==t.y+t.h},C=function(i,t){return(i.x+i.vx>t.x&&i.x+i.vx<t.x+t.w||i.x+i.w+i.vx>t.x&&i.x+i.w+i.vx<t.x+t.w)&&i.y!==t.y-i.h&&i.y!==t.y+t.h},A=function(i,t){return(i.y+i.vy>t.y&&i.y+i.vy<t.y+t.h||i.y+i.h+i.vy>t.y&&i.y+i.h+i.vy<t.y+t.h)&&i.x!==t.x-i.w&&i.x!==t.x+t.w},B=function(i,t){return!(i.x+i.vx>=t.x+t.w||i.x+i.vx+i.w<=t.x||i.y+i.vy>=t.y+t.h||i.y+i.vy+i.h<=t.y)},D=function(){function i(t){Object(c["a"])(this,i);var e=t.camera;this.camera=e,this.staticSprites={},this.unstableSprites={},this.dynamicSprites=[]}return Object(g["a"])(i,[{key:"addStaticSprite",value:function(i){for(var t in i){var e=i[t];this.staticSprites[t]=e;var n=e.sprites;if(n.length){for(var a={},s=0;s<n.length;s++){var d=n[s];a[d.x+","+d.y]=d}this.addStaticSprite(a)}}}},{key:"addUnstableSprite",value:function(i){for(var t in i)this.unstableSprites[t]=i[t]}},{key:"addDynamicSprite",value:function(i){var t=this;return i.forEach((function(i){i&&t.dynamicSprites.push(i)}))}},{key:"removeDynamicSprite",value:function(i){for(var t=0;t<this.dynamicSprites.length;t++)if(i===this.dynamicSprites[t]){this.dynamicSprites.splice(t,1);break}}},{key:"handleDynamicSpriteAndStaticSprite",value:function(i,t){this.handlePhysicalGravity(i),this.handlePhysicalMove(i),this.handlePhysicalCollection(i,t),i.handleMove()}},{key:"handlePhysicalGravity",value:function(i){if(i.isDoTop&&i.isAbleDoTop)return i._jumpOffset=(i._jumpOffset||0)+1,void(i._jumpOffset>=(i.maxJump||32)&&(i.isAbleDoTop=!1));i.vy=5}},{key:"handlePhysicalCollection",value:function(i,t){for(var e=k.unit,n=Math.max(~~(i.x/e)*e,0)-e,a=~~((i.x+i.w)/e)*e+e,s=~~(i.y/e)*e-e,d=~~((i.y+i.h)/e)*e+e,r=n;r<a;r+=e)for(var u=s;u<d;u+=e){var l=t[r+","+u];if(l){if(l.isRemoveBefore){delete t[r+","+u];continue}this.handleDynamicSpriteAndStaticSpriteCollection(i,l)}}}},{key:"handlePhysicalMove",value:function(i){switch(i.type){case"person":return this.handlePersonMove(i);case"bullet":return this.handleBulletMove(i)}}},{key:"handleDynamicSpriteAndStaticSpriteCollection",value:function(i,t){if(B(i,t))switch(i.type){case"person":return this.handlePersonCollectBuilding(i,t);case"bullet":return this.handleBulletCollectBuilding(i,t);case"mushroom-Bad":case"mushroom-Grow":return this.handleMushroomCollectBuilding(i,t)}}},{key:"handlePersonMove",value:function(i){i.vx=0,i.isDoTop&&i.isAbleDoTop&&(i.vy=-4),i.isDoLeft&&(i.vx=-4),i.isDoRight&&(i.vx=4)}},{key:"handleBulletMove",value:function(i){i.isDoTop&&i.isAbleDoTop&&(i.vy=-4)}},{key:"handlePersonCollectBuilding",value:function(i,t){return"building-Gold"===t.type?t.remove():"building-Flow"===t.type?(i.growToBullet(),t.remove()):(C(i,t)&&(i.vx=0),void(A(i,t)&&(z(i,t)&&(i.y=t.y+t.h,i.isAbleDoTop=!1,"base"!==i.personType&&(t.isBorn=!0),this.handleBuildingHorn(t)),j(i,t)&&(i.y=t.y-i.h,i._jumpOffset=0,i.vy=0,i.isAbleDoTop=!0))))}},{key:"handleBuildingHorn",value:function(i){if("building-Ask"===i.type){var t=this.unstableSprites[i.x+","+i.y];t&&!t.isAppear&&(t.isAppear=!0,this.dynamicSprites.push(t),delete this.unstableSprites[i.x+","+i.y])}i.horn()}},{key:"handleBulletCollectBuilding",value:function(i,t){"building-Gold"!==t.type&&"building-Flow"!==t.type&&(A(i,t)&&(z(i,t)&&(i.y=t.y+t.h,i.isDoTop=!1,i.isAbleDoTop=!1),j(i,t)&&(i.y=t.y-i.h,i.isDoTop=!0,i.isAbleDoTop=!0,i._jumpOffset=0)),C(i,t)&&(S(i,t)&&(i.x=t.x+t.w),R(i,t)&&(i.x=t.x-i.w),i.vx=0,i.vy=0,i.remove()))}},{key:"handleMushroomCollectBuilding",value:function(i,t){"building-Gold"!==t.type&&"building-Flow"!==t.type&&(A(i,t)&&(z(i,t)&&(i.y=t.y+t.h),j(i,t)&&(i.y=t.y-t.h,i.vy=0)),C(i,t)&&(i.vx=-i.vx))}},{key:"handleDynamicSpriteAndDynamicSprite",value:function(i,t){for(var e=0;e<t.length;e++){var n=t[e];if(this.camera.isInView(n)&&i!==n){if("person"===i.type){var a=i;B(a,n)&&("mushroom-Bad"===n.type&&(j(a,n)?(a.y-=20,n.death()):a.shrink()),"mushroom-Grow"===n.type&&n.ablePhysical&&(a.growToBig(),n.remove()))}if("bullet"===i.type){var s=i;B(s,n)&&"mushroom-Bad"===n.type&&(n.remove(),i.remove())}}}}},{key:"clear",value:function(){this.staticSprites={},this.unstableSprites={},this.dynamicSprites=[]}},{key:"run",value:function(){for(var i=this.staticSprites,t=this.dynamicSprites,e=0;e<t.length;e++){var n=t[e];n.isRemoveBefore||n.isRemove?(this.removeDynamicSprite(n),e--):n.ablePhysical&&(this.handleDynamicSpriteAndStaticSprite(n,i),this.handleDynamicSpriteAndDynamicSprite(n,t))}}}]),i}(),P=function(i,t,e){i["isDo".concat(t)]=e},T=function(i){var t=function(t){switch(t.preventDefault(),t.keyCode){case 38:P(i,"Top",!0);break;case 40:P(i,"Bottom",!0);break;case 37:P(i,"Left",!0);break;case 39:P(i,"Right",!0);break;case 32:P(i,"Bullet",!0)}},e=function(t){switch(t.keyCode){case 38:P(i,"Top",!1);break;case 40:P(i,"Bottom",!1);break;case 37:P(i,"Left",!1);break;case 39:P(i,"Right",!1);break;case 32:P(i,"Bullet",!1)}},n=function(){document.removeEventListener("keydown",t),document.removeEventListener("keyup",e)};return document.addEventListener("keydown",t),document.addEventListener("keyup",e),n},_=(e("ac1f"),e("5319"),e("5530")),G=function(i){Object(f["a"])(e,i);var t=Object(v["a"])(e);function e(i){var n;Object(c["a"])(this,e);var a=i.images,s=i.x,d=i.y,r=i.w,u=void 0===r?k.unit:r,l=i.h,o=void 0===l?k.unit:l,y=i.ableHorn,h=i.ableBorn,p=i.type,g=void 0===p?"building":p;return n=t.call(this,{images:a,x:s,y:d,w:u,h:o}),n.ableHorn=y,n.ableBorn=h,n.isBorn=!1,n.ableBeCover=!0,n.type=g,n}return Object(g["a"])(e,[{key:"horn",value:function(){this.ableHorn&&!this.isBorn&&(this.y=this.beginY-8)}},{key:"handleRestoreHorn",value:function(){this.y!==this.beginY&&(this.y+=1)}},{key:"frameWorkCallback",value:function(i,t,e){this.handleRestoreHorn()}}]),e}(L),E=e("45eb"),W=e("7e84"),M=function(i){Object(f["a"])(e,i);var t=Object(v["a"])(e);function e(i){var n;return Object(c["a"])(this,e),n=t.call(this,i),n.nothingImages=i.nothingImages,n.type="building-Ask",n}return Object(g["a"])(e,[{key:"horn",value:function(){Object(E["a"])(Object(W["a"])(e.prototype),"horn",this).call(this),this.ableHorn=!1,this.images=this.nothingImages}}]),e}(G),I=function(i){Object(f["a"])(e,i);var t=Object(v["a"])(e);function e(i){var n;return Object(c["a"])(this,e),n=t.call(this,i),n.frameDelay=.05,n.type="building-Gold",n}return e}(G),$=function(i){Object(f["a"])(e,i);var t=Object(v["a"])(e);function e(i){var n;return Object(c["a"])(this,e),n=t.call(this,i),n.frameDelay=.05,n.type="building-Flow",n}return e}(G),H=function(i){Object(f["a"])(e,i);var t=Object(v["a"])(e);function e(i){var n;return Object(c["a"])(this,e),n=t.call(this,i),n.type="building-Stone",n}return Object(g["a"])(e,[{key:"handleBorn",value:function(i){if(this.isBorn&&this.ableBorn){this.remove();var t=this.beginX,e=this.beginY,n=this.w,a=this.h,s=this.images;n/=2,a/=2,i.add([new X({x:t,y:e,w:n,h:a,images:s,index:0}),new X({x:t+n,y:e,w:n,h:a,images:s,index:1}),new X({x:t,y:e+a,w:n,h:a,images:s,index:2}),new X({x:t+n,y:e+a,w:n,h:a,images:s,index:3})]),this.ableBorn=!1}}},{key:"frameWorkCallback",value:function(i,t,n){Object(E["a"])(Object(W["a"])(e.prototype),"frameWorkCallback",this).call(this,i,t,n),this.handleBorn(i)}}]),e}(G),X=function(i){Object(f["a"])(e,i);var t=Object(v["a"])(e);function e(i){var n;Object(c["a"])(this,e);var a=i.index;return n=t.call(this,i),n.index=a,n.animatedX=0,n.animatedY=0,n.ablePhysical=!1,n.isCrop=!0,n.type="building-Born",n}return Object(g["a"])(e,[{key:"frameWorkCallback",value:function(){if(0===this.index||2===this.index){var i=0===this.index?5:3;this.animatedX+=2,this.animatedY=.1*this.animatedX*this.animatedX-i*this.animatedX,this.x=this.beginX-this.animatedX,this.y=this.beginY+this.animatedY}if(1===this.index||3===this.index){var t=1===this.index?5:3;this.animatedX+=2,this.animatedY=.1*this.animatedX*this.animatedX-t*this.animatedX,this.x=this.beginX+this.animatedX,this.y=this.beginY+this.animatedY}}}]),e}(G),N=function(i){Object(f["a"])(e,i);var t=Object(v["a"])(e);function e(i){var n;Object(c["a"])(this,e);var a=i.images,s=i.x,d=i.y,r=i.w;return n=t.call(this,Object(_["a"])(Object(_["a"])({},i),{},{images:[a[0]],x:s-r/2,y:d+22})),n.groupX=s,n.groupY=d,n.sprites.push(new G({images:[a[1]],x:s,y:d,type:"building-WinRod"})),n.allImages=a,n.type="building-Win",n.ablePhysical=!1,n.setRodCount(1),n}return Object(g["a"])(e,[{key:"getSpritesSumHeight",value:function(){return this.sprites.length*this.h}},{key:"setRodCount",value:function(i){var t,e=[];this.sprites.splice(1);for(var n=0;n<i;n++)e.push(new G({images:[this.allImages[2]],x:this.groupX,y:this.groupY+32*(n+1),type:"building-WinRod"}));return(t=this.sprites).push.apply(t,e),e}}]),e}(G),Y=function(i){Object(f["a"])(e,i);var t=Object(v["a"])(e);function e(i){var n;return Object(c["a"])(this,e),n=t.call(this,i),n.type="building-Normal",n}return e}(G),F=function(i,t){var e={x:i.x,y:i.y,w:k.unit,h:k.unit,images:t.building[i.type.replace("-","")],ableHorn:!1,ableBorn:!1};switch(i.type){case"building-Ask":return new M(Object(_["a"])(Object(_["a"])({},e),{},{ableHorn:!0,nothingImages:t.building.buildingNothing}));case"building-Gold":return new I(e);case"building-Flow":return new $(e);case"building-Stone":return new H(Object(_["a"])(Object(_["a"])({},e),{},{ableHorn:!0,ableBorn:!0}));case"building-Win":return new N(e)}return new Y(e)},U=function(i,t){for(var e={},n=0;n<t.length;n++){var a=t[n];e[a.x+","+a.y]=F(a,i)}return e},V=function(i){Object(f["a"])(e,i);var t=Object(v["a"])(e);function e(i){var n;Object(c["a"])(this,e);var a=i.images,s=i.x,d=i.y,r=i.w,u=void 0===r?32:r,l=i.h,o=void 0===l?32:l;return n=t.call(this,{images:a,x:s,y:d,w:u,h:o,frameDelay:.01}),n.vx=-1,n.vy=0,n.isAbleMove=!0,n}return Object(g["a"])(e,[{key:"handleMove",value:function(){this.isAbleMove&&(this.x+=this.vx,this.y+=this.vy)}}]),e}(L),J=function(i){Object(f["a"])(e,i);var t=Object(v["a"])(e);function e(i){var n;return Object(c["a"])(this,e),n=t.call(this,i),n.type="mushroom-Grow",n.isAbleMove=!1,n.isAppear=!1,n.ablePhysical=!1,n}return Object(g["a"])(e,[{key:"handleAppear",value:function(){var i=10;this.isAppear&&(this.y-=i,this.appearOffset=0,this.isAppear=!1),this.appearOffset<this.h-i&&(this.appearOffset++,this.y-=1),this.appearOffset>=this.h-i&&(this.isAbleMove=!0,this.ablePhysical=!0)}},{key:"frameWorkCallback",value:function(i,t,e){this.handleAppear()}}]),e}(V),q=function(i){Object(f["a"])(e,i);var t=Object(v["a"])(e);function e(i){var n;return Object(c["a"])(this,e),n=t.call(this,i),n.deathImages=i.deathImages,n.frameDelay=.05,n.type="mushroom-Bad",n}return Object(g["a"])(e,[{key:"death",value:function(){this.images=this.deathImages,this.isRemoveBefore=!0}},{key:"handleDeath",value:function(){this.isRemoveBefore&&(this.AnimatedDelay=this.AnimatedDelay||0,this.AnimatedDelay>=1?this.remove():this.AnimatedDelay+=.05)}},{key:"frameWorkCallback",value:function(){this.handleDeath()}}]),e}(V),K=function(i,t){return t.map((function(t){return new q({x:t.x,y:t.y,w:32,h:32,images:i.mushroom[t.type.replace("-","")],deathImages:i.mushroom.mushroomBadDie})}))},Q=function(i,t){var e={};return Object.values(i).forEach((function(i){"building-Ask"===i.type&&(e[i.x+","+i.y]=new J({x:i.x,y:i.y,w:32,h:32,images:t.mushroom.mushroomGrow}))})),e},Z=function(){var i=this,t=i.$createElement,e=i._self._c||t;return e("div",{staticClass:"editor"},[e("Header",{attrs:{isOpenEditor:i.isOpenEditor},on:{"edit-start":i.handleEditStart,"edit-end":i.handleEditEnd,"update:isOpenEditor":function(t){i.isOpenEditor=t},"update:is-open-editor":function(t){i.isOpenEditor=t}}}),e("Maps",{attrs:{maps:i.maps,active:i.mapActive},on:{change:i.handleActiveMap,delete:i.handleDeleteMap,add:i.handleAddMap}}),e("Content",{attrs:{fps:i.fps,gridWidth:i.gridWidth,gridHeight:i.gridHeight,gridUnit:i.gridUnit,tools:i.tools,isOpenEditor:i.isOpenEditor,isLoaded:i.isLoaded},on:{"update:isOpenEditor":function(t){i.isOpenEditor=t},"update:is-open-editor":function(t){i.isOpenEditor=t},"page-prev":function(t){return i.$emit("page-prev")},"page-next":function(t){return i.$emit("page-next")},"change-grid":i.onChangeGrid,"change-tool":function(t){return i.currentTool=t}}},[e("canvas",{ref:"canvas",attrs:{width:"800",height:"480"}})])],1)},ii=[],ti=(e("a9e3"),e("1276"),e("96cf"),e("1da1")),ei={title:"地图1",mapData:[{type:"building-Land",x:0,y:416},{type:"building-Land",x:0,y:448},{type:"building-Land",x:32,y:416},{type:"building-Land",x:32,y:448},{type:"building-Land",x:64,y:416},{type:"building-Land",x:64,y:448},{type:"building-Land",x:96,y:416},{type:"building-Land",x:96,y:448},{type:"building-Land",x:128,y:416},{type:"building-Land",x:128,y:448},{type:"building-Land",x:160,y:416},{type:"building-Land",x:160,y:448},{type:"building-Land",x:192,y:416},{type:"building-Land",x:192,y:448},{type:"building-Land",x:224,y:416},{type:"building-Land",x:224,y:448},{type:"building-Land",x:256,y:416},{type:"building-Land",x:256,y:448},{type:"building-Land",x:288,y:416},{type:"building-Land",x:288,y:448},{type:"building-Land",x:320,y:416},{type:"building-Land",x:320,y:448},{type:"building-Land",x:352,y:416},{type:"building-Land",x:352,y:448},{type:"building-Land",x:384,y:416},{type:"building-Land",x:384,y:448},{type:"building-Land",x:416,y:416},{type:"building-Land",x:416,y:448},{type:"building-Land",x:448,y:416},{type:"building-Land",x:448,y:448},{type:"building-Land",x:480,y:416},{type:"building-Land",x:480,y:448},{type:"building-Land",x:512,y:416},{type:"building-Land",x:512,y:448},{type:"building-Land",x:544,y:416},{type:"building-Land",x:544,y:448},{type:"building-Land",x:576,y:416},{type:"building-Land",x:576,y:448},{type:"building-Land",x:608,y:416},{type:"building-Land",x:608,y:448},{type:"building-Stone",x:192,y:288},{type:"building-Stone",x:224,y:288},{type:"building-Stone",x:256,y:288},{type:"building-Gold",x:288,y:256},{type:"building-Gold",x:320,y:256},{type:"building-Gold",x:352,y:256},{type:"building-Gold",x:384,y:256},{type:"building-Gold",x:416,y:256},{type:"building-Gold",x:448,y:256},{type:"building-Gold",x:480,y:256},{type:"building-Gold",x:512,y:256},{type:"building-Gold",x:544,y:256},{type:"building-Gold",x:576,y:256},{type:"building-Gold",x:608,y:256},{type:"building-Gold",x:640,y:256},{type:"building-Gold",x:672,y:256},{type:"building-Gold",x:704,y:256},{type:"building-Gold",x:736,y:256},{type:"building-Gold",x:768,y:256},{type:"building-Gold",x:800,y:256},{type:"building-Gold",x:832,y:256},{type:"building-Gold",x:864,y:256},{type:"building-Gold",x:896,y:256},{type:"building-Ask",x:288,y:288},{type:"building-Ask",x:320,y:288},{type:"building-Stone",x:352,y:288},{type:"building-Stone",x:384,y:288},{type:"building-Stone",x:416,y:288},{type:"building-Ask",x:1024,y:352},{type:"building-Ask",x:1056,y:352},{type:"building-Stone",x:1088,y:288},{type:"building-Stone",x:1120,y:288},{type:"building-Stone",x:1152,y:288},{type:"building-Land",x:704,y:416},{type:"building-Land",x:704,y:448},{type:"building-Land",x:736,y:416},{type:"building-Land",x:736,y:448},{type:"building-Land",x:768,y:416},{type:"building-Land",x:768,y:448},{type:"building-Land",x:800,y:416},{type:"building-Land",x:800,y:448},{type:"building-Land",x:832,y:416},{type:"building-Land",x:832,y:448},{type:"building-Land",x:864,y:416},{type:"building-Land",x:864,y:448},{type:"building-Land",x:896,y:416},{type:"building-Land",x:896,y:448},{type:"building-Land",x:928,y:416},{type:"building-Land",x:928,y:448},{type:"building-Land",x:960,y:416},{type:"building-Land",x:960,y:448},{type:"building-Land",x:992,y:416},{type:"building-Land",x:992,y:448},{type:"building-Land",x:1024,y:416},{type:"building-Land",x:1024,y:448},{type:"building-Land",x:1056,y:416},{type:"building-Land",x:1056,y:448},{type:"building-Land",x:1088,y:416},{type:"building-Land",x:1088,y:448},{type:"building-Land",x:1120,y:416},{type:"building-Land",x:1120,y:448},{type:"building-Land",x:1152,y:416},{type:"building-Land",x:1152,y:448},{type:"building-Land",x:1184,y:416},{type:"building-Land",x:1184,y:448},{type:"building-Land",x:1216,y:416},{type:"building-Land",x:1216,y:448},{type:"building-Land",x:1248,y:416},{type:"building-Land",x:1248,y:448},{type:"building-Land",x:1280,y:416},{type:"building-Land",x:1280,y:448},{type:"building-Land",x:1312,y:416},{type:"building-Land",x:1312,y:448},{type:"building-Land",x:960,y:288},{type:"building-Land",x:960,y:320},{type:"building-Land",x:992,y:288},{type:"building-Land",x:992,y:320},{type:"building-Land",x:1024,y:288},{type:"building-Land",x:1024,y:320},{type:"building-Land",x:1056,y:288},{type:"building-Land",x:1056,y:320},{type:"building-Land",x:1088,y:288},{type:"building-Land",x:1088,y:320},{type:"building-Land",x:1120,y:288},{type:"building-Land",x:1120,y:320},{type:"building-Land",x:1152,y:288},{type:"building-Land",x:1152,y:320},{type:"building-Land",x:1184,y:288},{type:"building-Land",x:1184,y:320},{type:"building-Land",x:1216,y:288},{type:"building-Land",x:1216,y:320},{type:"building-Land",x:1248,y:288},{type:"building-Land",x:1248,y:320},{type:"building-Land",x:1280,y:288},{type:"building-Land",x:1280,y:320},{type:"building-Land",x:1312,y:288},{type:"building-Land",x:1312,y:320},{type:"building-Land",x:1344,y:288},{type:"building-Land",x:1344,y:320},{type:"building-Land",x:1376,y:288},{type:"building-Land",x:1376,y:320},{type:"building-Land",x:1408,y:288},{type:"building-Land",x:1408,y:320},{type:"building-Land",x:1440,y:288},{type:"building-Land",x:1440,y:320},{type:"building-Land",x:1472,y:288},{type:"building-Land",x:1472,y:320},{type:"building-Land",x:1504,y:288},{type:"building-Land",x:1504,y:320},{type:"building-Land",x:1536,y:288},{type:"building-Land",x:1536,y:320},{type:"building-Land",x:1568,y:288},{type:"building-Land",x:1568,y:320},{type:"building-Land",x:1600,y:288},{type:"building-Land",x:1600,y:320},{type:"building-Land",x:1632,y:288},{type:"building-Land",x:1632,y:320},{type:"building-Land",x:1664,y:288},{type:"building-Land",x:1664,y:320},{type:"building-Land",x:1696,y:288},{type:"building-Land",x:1696,y:320},{type:"building-Land",x:1728,y:288},{type:"building-Land",x:1728,y:320},{type:"building-Land",x:1760,y:288},{type:"building-Land",x:1760,y:320},{type:"building-Land",x:1792,y:288},{type:"building-Land",x:1792,y:320},{type:"building-Land",x:1824,y:288},{type:"building-Land",x:1824,y:320},{type:"building-Land",x:1856,y:288},{type:"building-Land",x:1856,y:320},{type:"building-Land",x:1888,y:288},{type:"building-Land",x:1888,y:320},{type:"building-Land",x:1920,y:288},{type:"building-Land",x:1920,y:320},{type:"building-Land",x:1952,y:288},{type:"building-Land",x:1952,y:320},{type:"building-Land",x:1984,y:288},{type:"building-Land",x:1984,y:320},{type:"building-Land",x:2016,y:288},{type:"building-Land",x:2016,y:320},{type:"building-Land",x:2048,y:288},{type:"building-Land",x:2048,y:320},{type:"building-Land",x:2080,y:288},{type:"building-Land",x:2080,y:320},{type:"building-Land",x:2112,y:288},{type:"building-Land",x:2112,y:320},{type:"building-Land",x:2144,y:288},{type:"building-Land",x:2144,y:320},{type:"building-Land",x:2176,y:288},{type:"building-Land",x:2176,y:320},{type:"building-Land",x:2208,y:288},{type:"building-Land",x:2208,y:320},{type:"building-Land",x:2240,y:288},{type:"building-Land",x:2240,y:320},{type:"building-Land",x:2272,y:288},{type:"building-Land",x:2272,y:320},{type:"building-Land",x:2304,y:288},{type:"building-Land",x:2304,y:320},{type:"building-Land",x:2336,y:288},{type:"building-Land",x:2336,y:320},{type:"building-Land",x:2368,y:288},{type:"building-Land",x:2368,y:320},{type:"building-Land",x:2400,y:288},{type:"building-Land",x:2400,y:320},{type:"building-Land",x:2432,y:288},{type:"building-Land",x:2432,y:320},{type:"building-Land",x:2464,y:288},{type:"building-Land",x:2464,y:320},{type:"building-Land",x:2496,y:288},{type:"building-Land",x:2496,y:320},{type:"building-Land",x:2528,y:288},{type:"building-Land",x:2528,y:320},{type:"building-Ask",x:320,y:384},{type:"building-Ask",x:352,y:384},{type:"building-Ask",x:544,y:384},{type:"building-Ask",x:576,y:384},{type:"building-Flow",x:544,y:352},{type:"building-Flow",x:576,y:352},{type:"building-Stone",x:192,y:128},{type:"building-Stone",x:192,y:160},{type:"building-WinRod",x:704,y:64},{type:"building-WinRod",x:704,y:96},{type:"building-WinRod",x:704,y:128},{type:"building-WinRod",x:704,y:160},{type:"building-WinRod",x:704,y:192},{type:"building-WinRod",x:704,y:224},{type:"building-WinRod",x:704,y:256},{type:"building-WinRod",x:704,y:288},{type:"building-WinRod",x:704,y:320},{type:"building-WinRod",x:704,y:352},{type:"building-WinRod",x:704,y:384},{type:"building-Win",x:704,y:32}],mushroomData:[{type:"mushroom-Bad",x:448,y:352},{type:"mushroom-Bad",x:480,y:352},{type:"mushroom-Bad",x:320,y:96}]},ni={mapData:[{type:"building-Rock",x:0,y:416},{type:"building-Rock",x:0,y:448},{type:"building-Rock",x:32,y:416},{type:"building-Rock",x:32,y:448},{type:"building-Rock",x:64,y:416},{type:"building-Rock",x:64,y:448},{type:"building-Rock",x:96,y:416},{type:"building-Rock",x:96,y:448},{type:"building-Rock",x:128,y:416},{type:"building-Rock",x:128,y:448},{type:"building-Rock",x:160,y:416},{type:"building-Rock",x:160,y:448},{type:"building-Rock",x:192,y:416},{type:"building-Rock",x:192,y:448},{type:"building-Rock",x:224,y:416},{type:"building-Rock",x:224,y:448},{type:"building-Land",x:288,y:416},{type:"building-Land",x:288,y:448},{type:"building-Land",x:320,y:416},{type:"building-Land",x:320,y:448},{type:"building-Land",x:352,y:416},{type:"building-Land",x:352,y:448},{type:"building-Land",x:384,y:416},{type:"building-Land",x:384,y:448},{type:"building-Land",x:416,y:416},{type:"building-Land",x:416,y:448},{type:"building-Land",x:448,y:416},{type:"building-Land",x:448,y:448},{type:"building-Land",x:480,y:416},{type:"building-Land",x:480,y:448},{type:"building-Land",x:512,y:416},{type:"building-Land",x:512,y:448},{type:"building-Land",x:544,y:416},{type:"building-Land",x:544,y:448},{type:"building-Land",x:576,y:416},{type:"building-Land",x:576,y:448},{type:"building-Land",x:608,y:416},{type:"building-Land",x:608,y:448},{type:"building-Stone",x:192,y:288},{type:"building-Stone",x:224,y:288},{type:"building-Stone",x:256,y:288},{type:"building-Gold",x:288,y:256},{type:"building-Gold",x:320,y:256},{type:"building-Gold",x:352,y:256},{type:"building-Gold",x:384,y:256},{type:"building-Gold",x:416,y:256},{type:"building-Gold",x:448,y:256},{type:"building-Gold",x:480,y:256},{type:"building-Gold",x:512,y:256},{type:"building-Gold",x:544,y:256},{type:"building-Gold",x:576,y:256},{type:"building-Gold",x:608,y:256},{type:"building-Gold",x:640,y:256},{type:"building-Gold",x:672,y:256},{type:"building-Gold",x:704,y:256},{type:"building-Gold",x:800,y:256},{type:"building-Gold",x:832,y:256},{type:"building-Gold",x:864,y:256},{type:"building-Gold",x:896,y:256},{type:"building-Ask",x:288,y:288},{type:"building-Ask",x:320,y:288},{type:"building-Stone",x:352,y:288},{type:"building-Stone",x:384,y:288},{type:"building-Stone",x:416,y:288},{type:"building-Ask",x:1024,y:352},{type:"building-Stone",x:1088,y:288},{type:"building-Stone",x:1152,y:288},{type:"building-Land",x:704,y:416},{type:"building-Land",x:704,y:448},{type:"building-Land",x:736,y:416},{type:"building-Land",x:736,y:448},{type:"building-Land",x:768,y:416},{type:"building-Land",x:768,y:448},{type:"building-Land",x:800,y:416},{type:"building-Land",x:1216,y:448},{type:"building-Land",x:1248,y:416},{type:"building-Land",x:1280,y:416},{type:"building-Land",x:1280,y:448},{type:"building-Land",x:1312,y:416},{type:"building-Land",x:1312,y:448},{type:"building-Land",x:960,y:288},{type:"building-Land",x:960,y:320},{type:"building-Land",x:992,y:288},{type:"building-Land",x:992,y:320},{type:"building-Land",x:1024,y:288},{type:"building-Land",x:1024,y:320},{type:"building-Land",x:1056,y:288},{type:"building-Land",x:1056,y:320},{type:"building-Land",x:1248,y:320},{type:"building-Land",x:1280,y:288},{type:"building-Land",x:1280,y:320},{type:"building-Land",x:1312,y:288},{type:"building-Land",x:1312,y:320},{type:"building-Land",x:1344,y:320},{type:"building-Land",x:1376,y:288},{type:"building-Land",x:1376,y:320},{type:"building-Land",x:1408,y:288},{type:"building-Land",x:1408,y:320},{type:"building-Land",x:1440,y:288},{type:"building-Land",x:1440,y:320},{type:"building-Land",x:1472,y:320},{type:"building-Land",x:1504,y:288},{type:"building-Land",x:1504,y:320},{type:"building-Land",x:1536,y:288},{type:"building-Land",x:1536,y:320},{type:"building-Land",x:1568,y:288},{type:"building-Land",x:1568,y:320},{type:"building-Land",x:1600,y:288},{type:"building-Land",x:1600,y:320},{type:"building-Land",x:1632,y:288},{type:"building-Land",x:1632,y:320},{type:"building-Land",x:1664,y:288},{type:"building-Land",x:1664,y:320},{type:"building-Land",x:1696,y:288},{type:"building-Land",x:1696,y:320},{type:"building-Land",x:2240,y:288},{type:"building-Land",x:2240,y:320},{type:"building-Land",x:2272,y:288},{type:"building-Land",x:2272,y:320},{type:"building-Land",x:2304,y:288},{type:"building-Land",x:2304,y:320},{type:"building-Land",x:2336,y:288},{type:"building-Land",x:2336,y:320},{type:"building-Land",x:2368,y:288},{type:"building-Land",x:2368,y:320},{type:"building-Land",x:2400,y:288},{type:"building-Land",x:2400,y:320},{type:"building-Land",x:2432,y:288},{type:"building-Land",x:2432,y:320},{type:"building-Land",x:2464,y:288},{type:"building-Land",x:2464,y:320},{type:"building-Land",x:2496,y:288},{type:"building-Land",x:2496,y:320},{type:"building-Land",x:2528,y:288},{type:"building-Land",x:2528,y:320},{type:"building-Ask",x:320,y:384},{type:"building-Ask",x:352,y:384},{type:"building-Ask",x:544,y:384},{type:"building-Ask",x:576,y:384},{type:"building-Flow",x:544,y:352},{type:"building-Flow",x:576,y:352}],mushroomData:[{type:"mushroom-Bad",x:448,y:352},{type:"mushroom-Bad",x:480,y:352},{type:"mushroom-Bad",x:320,y:96}]},ai=(e("d3b7"),e("3ca3"),e("ddb0"),e("3835")),si=function(i){return new Promise((function(t,e){var n=new Image;n.onload=function(){return t(n)},n.onerror=function(i){return e(i)},n.src=i}))},di=function(){return Promise.all([si("https://hhzzcc.github.io/mario/dist/imgs/persons/base/static/static.png"),si("https://hhzzcc.github.io/mario/dist/imgs/persons/base/jump/jump-back.png"),si("https://hhzzcc.github.io/mario/dist/imgs/persons/base/jump/jump-front.png"),si("https://hhzzcc.github.io/mario/dist/imgs/persons/base/front/frame-1.gif"),si("https://hhzzcc.github.io/mario/dist/imgs/persons/base/front/frame-2.gif"),si("https://hhzzcc.github.io/mario/dist/imgs/persons/base/front/frame-3.gif"),si("https://hhzzcc.github.io/mario/dist/imgs/persons/base/back/frame-1.gif"),si("https://hhzzcc.github.io/mario/dist/imgs/persons/base/back/frame-2.gif"),si("https://hhzzcc.github.io/mario/dist/imgs/persons/base/back/frame-3.gif"),si("https://hhzzcc.github.io/mario/dist/imgs/persons/base/die/die.png")])},ri=function(){return Promise.all([si("https://hhzzcc.github.io/mario/dist/imgs/persons/big/static/index.png"),si("https://hhzzcc.github.io/mario/dist/imgs/persons/big/jump/back.png"),si("https://hhzzcc.github.io/mario/dist/imgs/persons/big/jump/index.png"),si("https://hhzzcc.github.io/mario/dist/imgs/persons/big/front/frame-1.gif"),si("https://hhzzcc.github.io/mario/dist/imgs/persons/big/front/frame-2.gif"),si("https://hhzzcc.github.io/mario/dist/imgs/persons/big/front/frame-3.gif"),si("https://hhzzcc.github.io/mario/dist/imgs/persons/big/back/frame-1.gif"),si("https://hhzzcc.github.io/mario/dist/imgs/persons/big/back/frame-2.gif"),si("https://hhzzcc.github.io/mario/dist/imgs/persons/big/back/frame-3.gif")])},ui=function(){return Promise.all([si("https://hhzzcc.github.io/mario/dist/imgs/persons/bullet/static/index.png"),si("https://hhzzcc.github.io/mario/dist/imgs/persons/bullet/jump/back.png"),si("https://hhzzcc.github.io/mario/dist/imgs/persons/bullet/jump/index.png"),si("https://hhzzcc.github.io/mario/dist/imgs/persons/bullet/front/frame-1.gif"),si("https://hhzzcc.github.io/mario/dist/imgs/persons/bullet/front/frame-2.gif"),si("https://hhzzcc.github.io/mario/dist/imgs/persons/bullet/front/frame-3.gif"),si("https://hhzzcc.github.io/mario/dist/imgs/persons/bullet/back/frame-1.gif"),si("https://hhzzcc.github.io/mario/dist/imgs/persons/bullet/back/frame-2.gif"),si("https://hhzzcc.github.io/mario/dist/imgs/persons/bullet/back/frame-3.gif"),si("https://hhzzcc.github.io/mario/dist/imgs/persons/bullet/bullet/back.png"),si("https://hhzzcc.github.io/mario/dist/imgs/persons/bullet/bullet/index.png")])},li=function(){return Promise.all([si("https://hhzzcc.github.io/mario/dist/imgs/mushroom/grow/grow.png"),si("https://hhzzcc.github.io/mario/dist/imgs/mushroom/bad/frame-1.gif"),si("https://hhzzcc.github.io/mario/dist/imgs/mushroom/bad/frame-2.gif"),si("https://hhzzcc.github.io/mario/dist/imgs/mushroom/bad/die.gif")])},oi=function(){return Promise.all([si("https://hhzzcc.github.io/mario/dist/imgs/building/ask/frame-1.gif"),si("https://hhzzcc.github.io/mario/dist/imgs/building/ask/frame-2.gif"),si("https://hhzzcc.github.io/mario/dist/imgs/building/ask/frame-3.gif"),si("https://hhzzcc.github.io/mario/dist/imgs/building/ask/frame-4.gif"),si("https://hhzzcc.github.io/mario/dist/imgs/building/ask/frame-5.gif"),si("https://hhzzcc.github.io/mario/dist/imgs/building/ask/frame-6.gif"),si("https://hhzzcc.github.io/mario/dist/imgs/building/ask/nothing.png"),si("https://hhzzcc.github.io/mario/dist/imgs/building/land/land.png"),si("https://hhzzcc.github.io/mario/dist/imgs/building/stone/stone.png"),si("https://hhzzcc.github.io/mario/dist/imgs/building/rock/rock.png"),si("https://hhzzcc.github.io/mario/dist/imgs/building/gold/frame-1.gif"),si("https://hhzzcc.github.io/mario/dist/imgs/building/gold/frame-2.gif"),si("https://hhzzcc.github.io/mario/dist/imgs/building/gold/frame-3.gif"),si("https://hhzzcc.github.io/mario/dist/imgs/building/gold/frame-4.gif"),si("https://hhzzcc.github.io/mario/dist/imgs/building/gold/frame-5.gif"),si("https://hhzzcc.github.io/mario/dist/imgs/building/gold/frame-6.gif"),si("https://hhzzcc.github.io/mario/dist/imgs/building/flow/frame-1.gif"),si("https://hhzzcc.github.io/mario/dist/imgs/building/flow/frame-2.gif"),si("https://hhzzcc.github.io/mario/dist/imgs/building/flow/frame-3.gif"),si("https://hhzzcc.github.io/mario/dist/imgs/building/flow/frame-4.gif"),si("https://hhzzcc.github.io/mario/dist/imgs/building/pipe/pipelineL.png"),si("https://hhzzcc.github.io/mario/dist/imgs/building/pipe/pipelineR.png"),si("https://hhzzcc.github.io/mario/dist/imgs/building/pipe/pipelineTopL.png"),si("https://hhzzcc.github.io/mario/dist/imgs/building/pipe/pipelineTopR.png"),si("https://hhzzcc.github.io/mario/dist/imgs/building/win/flag.png"),si("https://hhzzcc.github.io/mario/dist/imgs/building/win/round.png"),si("https://hhzzcc.github.io/mario/dist/imgs/building/win/rod.png")])},yi=function(){return Promise.all([si("https://hhzzcc.github.io/mario/dist/imgs/bullet/frame-1.gif"),si("https://hhzzcc.github.io/mario/dist/imgs/bullet/frame-2.gif"),si("https://hhzzcc.github.io/mario/dist/imgs/bullet/frame-3.gif"),si("https://hhzzcc.github.io/mario/dist/imgs/bullet/frame-4.gif")])},hi=function(){return si("https://hhzzcc.github.io/mario/dist/imgs/scene/background.jpg")},pi=function(){var i=Object(ti["a"])(regeneratorRuntime.mark((function i(){var t,e,n,a,s,d,r,u,l,o,y,h,p,c,g,b,m,x,f,v,L,k,w,O,z,j,S,R,C,A,B,D,P,T,_,G,E,W,M,I,$,H,X,N,Y,F,U,V,J,q,K,Q,Z,ii,ti,ei,ni,si,pi,ci,gi,bi,mi,xi,fi,vi,Li,ki,wi,Oi,zi,ji,Si,Ri,Ci,Ai,Bi,Di;return regeneratorRuntime.wrap((function(i){while(1)switch(i.prev=i.next){case 0:return i.next=2,di();case 2:return t=i.sent,e=Object(ai["a"])(t,10),n=e[0],a=e[1],s=e[2],d=e[3],r=e[4],u=e[5],l=e[6],o=e[7],y=e[8],h=e[9],i.next=16,ri();case 16:return p=i.sent,c=Object(ai["a"])(p,9),g=c[0],b=c[1],m=c[2],x=c[3],f=c[4],v=c[5],L=c[6],k=c[7],w=c[8],i.next=29,ui();case 29:return O=i.sent,z=Object(ai["a"])(O,11),j=z[0],S=z[1],R=z[2],C=z[3],A=z[4],B=z[5],D=z[6],P=z[7],T=z[8],_=z[9],G=z[10],i.next=44,li();case 44:return E=i.sent,W=Object(ai["a"])(E,4),M=W[0],I=W[1],$=W[2],H=W[3],i.next=52,oi();case 52:return X=i.sent,N=Object(ai["a"])(X,27),Y=N[0],F=N[1],U=N[2],V=N[3],J=N[4],q=N[5],K=N[6],Q=N[7],Z=N[8],ii=N[9],ti=N[10],ei=N[11],ni=N[12],si=N[13],pi=N[14],ci=N[15],gi=N[16],bi=N[17],mi=N[18],xi=N[19],fi=N[20],vi=N[21],Li=N[22],ki=N[23],wi=N[24],Oi=N[25],zi=N[26],i.next=83,yi();case 83:return ji=i.sent,Si=Object(ai["a"])(ji,4),Ri=Si[0],Ci=Si[1],Ai=Si[2],Bi=Si[3],i.next=91,hi();case 91:return Di=i.sent,i.abrupt("return",{person:{basePersonStatic:[n],basePersonTopLeft:[a],basePersonTopRight:[s],basePersonRight:[d,r,u],basePersonLeft:[l,o,y],basePersonDeath:[h],bigPersonStatic:[g],bigPersonTopLeft:[b],bigPersonTopRight:[m],bigPersonRight:[x,f,v],bigPersonLeft:[L,k,w],bulletPersonStatic:[j],bulletPersonTopLeft:[S],bulletPersonTopRight:[R],bulletPersonRight:[C,A,B],bulletPersonLeft:[D,P,T],bulletPersonBulletLeft:[_],bulletPersonBulletRight:[G],bullet:[Ri,Ci,Ai,Bi]},mushroom:{mushroomGrow:[M],mushroomBad:[I,$,I],mushroomBadDie:[H]},building:{buildingAsk:[Y,F,U,V,J,q],buildingNothing:[K],buildingLand:[Q],buildingStone:[Z],buildingRock:[ii],buildingGold:[ti,ei,ni,si,pi,ci],buildingFlow:[gi,bi,mi,xi],buildingPipeLeft:[fi],buildingPipeRight:[vi],buildingPipeTopLeft:[Li],buildingPipeTopRight:[ki],buildingWin:[wi,Oi,zi],buildingWinRod:[zi]},scene:{sceneBackground:[Di]}});case 93:case"end":return i.stop()}}),i)})));return function(){return i.apply(this,arguments)}}(),ci=function(){var i=this,t=i.$createElement,e=i._self._c||t;return e("div",{staticClass:"editor-header"},[e("div",{staticClass:"editor-header__logo"},[i._v("超级玛丽游戏编辑器")]),e("div",{staticClass:"editor-header__edit",on:{click:i.handleEdit}},[e("Icon",{attrs:{name:"iconbianjibi"}}),i._v(" "+i._s(i.isOpenEditor?"编辑结束":"开始编辑")+" ")],1)])},gi=[],bi=function(){var i=this,t=i.$createElement,e=i._self._c||t;return e("svg",{staticClass:"icon"},[e("use",{attrs:{"xlink:href":"#"+i.name}})])},mi=[],xi={name:"icon",props:{name:{type:String,required:!0}}},fi=xi,vi=(e("3ab0"),Object(d["a"])(fi,bi,mi,!1,null,null,null)),Li=vi.exports,ki={name:"editor-header",components:{Icon:Li},props:{isOpenEditor:{type:Boolean,default:!1}},data:function(){return{isEdit:!1}},methods:{handleEdit:function(){this.isOpenEditor?this.$emit("edit-end"):this.$emit("edit-start"),this.$emit("update:isOpenEditor",!this.isOpenEditor)}}},wi=ki,Oi=(e("6629"),Object(d["a"])(wi,ci,gi,!1,null,null,null)),zi=Oi.exports,ji=function(){var i=this,t=i.$createElement,e=i._self._c||t;return e("div",{staticClass:"editor-maps"},[i._l(i.maps,(function(t,n){return e("Map",{key:t.name,attrs:{map:t,active:n===i.active,ableDelete:i.maps.length>1},on:{delete:function(e){return i.$emit("delete",{map:t,i:n})}},nativeOn:{click:function(e){return i.$emit("change",{map:t,i:n})}}})})),e("Map",{attrs:{map:{title:"添加地图"},ableDelete:!1},nativeOn:{click:function(t){return i.$emit("add")}}})],2)},Si=[],Ri=function(){var i=this,t=i.$createElement,e=i._self._c||t;return e("div",{class:i.className},[e("div",{staticClass:"'map__title"},[i._v(i._s(i.map.title))]),i.ableDelete?e("Icon",{attrs:{name:"iconshanchu"},nativeOn:{click:function(t){return t.stopPropagation(),i.$emit("delete")}}}):i._e()],1)},Ci=[],Ai={name:"editor-map",components:{Icon:Li},props:{map:{type:Object,default:function(){return{}}},active:{type:Boolean,default:!1},ableDelete:{type:Boolean,default:!0}},computed:{className:function(){var i="map";return this.active?i+" map--active":i}}},Bi=Ai,Di=(e("cd6c"),Object(d["a"])(Bi,Ri,Ci,!1,null,null,null)),Pi=Di.exports,Ti={name:"editor-maps",components:{Map:Pi},props:{active:{type:Number,default:0},maps:{type:Array,default:function(){return[]}}}},_i=Ti,Gi=(e("c3eb"),Object(d["a"])(_i,ji,Si,!1,null,null,null)),Ei=Gi.exports,Wi=function(){var i=this,t=i.$createElement,e=i._self._c||t;return e("div",{staticClass:"editor-content"},[i.isLoaded?e("div",[e("div",{staticClass:"editor-content__game"},[i.isOpenEditor?e("span",{on:{click:function(t){return i.$emit("page-prev")}}},[i._v("←"),e("div",[i._v("相机左移")])]):i._e(),e("div",{staticClass:"editor-content__canvas"},[i._t("default"),i.fps?e("div",{staticClass:"editor-content__fps"},[i._v("fps: "+i._s(i.fps))]):i._e(),i.gridWidth&&i.isOpenEditor?e("Grids",{attrs:{width:i.gridWidth,height:i.gridHeight,unit:i.gridUnit},on:{change:function(t){return i.$emit("change-grid",t)}}}):i._e()],2),i.isOpenEditor?e("span",{on:{click:function(t){return i.$emit("page-next")}}},[i._v("→"),e("div",[i._v("相机右移")])]):i._e()]),e("div",{staticClass:"editor-content__tip",style:{paddingLeft:i.isOpenEditor?"90px":null}},[i._v(" 键盘操作：上下左右控制 空格发射子弹 ")]),i.tools.length&&i.isOpenEditor?e("Tools",{attrs:{tools:i.tools},on:{change:function(t){return i.$emit("change-tool",t)}}}):i._e()],1):e("Icon",{attrs:{name:"iconloading-copy"}})],1)},Mi=[],Ii=function(){var i=this,t=i.$createElement,e=i._self._c||t;return e("div",{staticClass:"editor-grids"},i._l(i.grids,(function(t){return e("div",{key:t.x+","+t.y,staticClass:"editor-grids__grid",style:{width:i.unit+"px",height:i.unit+"px"},on:{click:function(e){return i.$emit("change",t)}}})})),0)},$i=[],Hi={name:"editor-grids",props:{width:{type:Number,default:0},height:{type:Number,default:0},unit:{type:Number,default:0}},data:function(){return{grids:[]}},mounted:function(){this.createGrid()},methods:{createGrid:function(){this.grids=[];for(var i=0;i<this.height;i+=this.unit)for(var t=0;t<this.width;t+=this.unit)this.grids.push({x:t,y:i,unit:this.unit})}}},Xi=Hi,Ni=(e("4576"),Object(d["a"])(Xi,Ii,$i,!1,null,null,null)),Yi=Ni.exports,Fi=function(){var i=this,t=i.$createElement,e=i._self._c||t;return e("div",{staticClass:"editor-tools"},[e("div",{staticClass:"editor-tools__tip"},[i._v("小提示：点击下方精灵后点击上方网格可添加")]),e("div",{staticClass:"editor-tools__content"},i._l(i.tools,(function(t,n){return e("img",{key:n,staticClass:"editor-tools__tool",attrs:{src:t.image.src},on:{click:function(e){return i.handleClick(t)}}})})),0)])},Ui=[],Vi={name:"editor-tools",props:{tools:{type:Array,default:function(){return[]}}},methods:{handleClick:function(i){this.$el.parentElement.style.cursor="url(".concat(i.image.src,"), pointer"),this.$emit("change",i)}}},Ji=Vi,qi=(e("4dc7"),Object(d["a"])(Ji,Fi,Ui,!1,null,null,null)),Ki=qi.exports,Qi={name:"editor-content",components:{Icon:Li,Grids:Yi,Tools:Ki},props:{isLoaded:{type:Boolean,default:!1},gridWidth:{type:Number,default:0},gridHeight:{type:Number,default:0},gridUnit:{type:Number,default:0},fps:{type:Number,default:60},tools:{type:Array,default:function(){return[]}},isOpenEditor:{type:Boolean,default:!0}}},Zi=Qi,it=(e("a3f8"),Object(d["a"])(Zi,Wi,Mi,!1,null,null,null)),tt=it.exports,et={name:"editor",components:{Header:zi,Maps:Ei,Content:tt},props:{staticSprites:{type:Object,default:function(){return{}}},cameraX:{type:Number,default:0},cameraY:{type:Number,default:0},fps:{type:Number,default:60}},data:function(){return{maps:[Object(_["a"])({title:"地图1"},ei),Object(_["a"])({title:"地图2"},ni)],mapActive:0,gridWidth:0,gridHeight:0,gridUnit:0,currentTool:null,images:null,tools:[],isOpenEditor:!1,isLoaded:!1}},mounted:function(){console.log(ei),this.init()},methods:{init:function(){var i=this;return Object(ti["a"])(regeneratorRuntime.mark((function t(){var e;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.next=2,pi();case 2:e=t.sent,i.images=e,i.isLoaded=!0,i.$nextTick((function(){var t=i.$refs.canvas;i.gridWidth=t.width,i.gridHeight=t.height,i.gridUnit=k.unit,i.tools=[{type:"building-Stone",image:e.building.buildingStone[0]},{type:"building-Ask",image:e.building.buildingAsk[3]},{type:"building-Gold",image:e.building.buildingGold[4]},{type:"building-Land",image:e.building.buildingLand[0]},{type:"building-Rock",image:e.building.buildingRock[0]},{type:"building-PipeLeft",image:e.building.buildingPipeLeft[0]},{type:"building-PipeRight",image:e.building.buildingPipeRight[0]},{type:"building-PipeTopLeft",image:e.building.buildingPipeTopLeft[0]},{type:"building-PipeTopRight",image:e.building.buildingPipeTopRight[0]},{type:"building-Win",image:e.building.buildingWin[0]},{type:"mushroom-Bad",image:e.mushroom.mushroomBad[0]}],i.$emit("load",{images:e,map:i.maps[i.mapActive],canvas:t})}));case 6:case"end":return t.stop()}}),t)})))()},handleEditStart:function(){this.$emit("edit-start"),this.isOpenEditor=!0},handleEditEnd:function(){this.$emit("edit-end"),this.isOpenEditor=!1},handleActiveMap:function(i){i.map;var t=i.i;this.mapActive=t,this.start()},handleDeleteMap:function(i){i.map;var t=i.i;this.maps.splice(t,1),this.mapActive=Math.min(t,this.maps.length-1),this.start()},handleAddMap:function(){this.maps.push({title:"地图".concat(this.maps.length+1),mapData:[],mushroomData:[]}),this.mapActive=this.maps.length-1,this.start(),this.handleEditStart()},onChangeGrid:function(i){if(this.currentTool){var t=this.currentTool.type,e="mushroom"===t.split("-")[0]?"mushroomData":"mapData",n=this.maps[this.mapActive][e],a={type:t,x:this.cameraX+i.x,y:this.cameraY+i.y},s=this.createSprites(a);"building-Win"===t&&this.handleBuildingWin(s,n,a),n.push(a),this.$emit("edit",s)}},handleBuildingWin:function(i,t,e){for(var n=[],a=Object.values(i.buildings)[0],s=e.y;s<this.gridHeight-e.y;s+=k.unit){var d=this.staticSprites[e.x+","+(e.y+s)];if(d&&("building-Normal"===d.type||"building-Ask"===d.type||"building-Stone"===d.type)){n=a.setRodCount(s/k.unit-1);break}s===this.gridHeight-e.y-k.unit&&(n=a.setRodCount(s/k.unit))}for(var r=0;r<n.length;r++){var u=n[r];t.push({type:"building-WinRod",x:u.x,y:u.y})}},createSprites:function(i){var t=this.images,e={buildings:{},mushroomsBad:[],mushroomsGrow:[]};return i.type.includes("building")&&(e.buildings=U(t,[i]),i.type.includes("Ask")&&(e.mushroomsGrow=Q(e.buildings,t))),i.type.includes("mushroom")&&(e.mushroomsBad=K(t,[i])),e},start:function(){console.log(this.maps[this.mapActive]),this.$emit("start",this.maps[this.mapActive])}}},nt=et,at=(e("2cf9"),Object(d["a"])(nt,Z,ii,!1,null,null,null)),st=at.exports,dt={name:"home",components:{Editor:st},data:function(){return{person:null,camera:null,scene:null,physical:null,renderer:null,images:null,canvas:null,ableStartGame:!0,ableVisiblePerson:!0,ableLoadedEditor:!1,fps:60,fpsCount:0}},methods:{handleLoad:function(i){var t=i.images,e=i.map,n=i.canvas;this.images=t,this.canvas=n,this.person=this.initPerson(),this.camera=this.initCamera(),this.scene=this.initScene(),this.physical=this.initPhysical(),this.renderer=this.initRenderer(),this.handleStart(e)},handleStart:function(i){this.clear();var t=this.createSprites(i);this.sceneAddSprite(t),this.physicalAddSprite(t),this.reRender()},handleEditStart:function(){this.camera.x=0,this.ableVisiblePerson=!1},handleEdit:function(i){this.sceneAddSprite(i,!1),this.physicalAddSprite(i,!1)},handleEditEnd:function(){this.ableVisiblePerson=!0},handlePagePrev:function(){this.camera.x=Math.max(this.camera.x-this.camera.w,0)},handlePageNext:function(){this.camera.x=Math.min(this.camera.x+this.camera.w,this.scene.w-this.camera.w)},initPerson:function(){var i=this.images,t=new O({allImages:i.person,x:k.personOffset,y:0});return T(t),t},initCamera:function(){return new b({x:0,y:0,w:this.canvas.width,h:this.canvas.height})},initScene:function(){var i=this.images;return new m({w:2*i.scene.sceneBackground[0].width,h:i.scene.sceneBackground[0].height,backgroundImage:i.scene.sceneBackground[0]})},initPhysical:function(){var i=this.scene,t=this.camera;return new D({scene:i,camera:t})},initRenderer:function(){var i=this.canvas,t=this.camera,e=this.scene,n=this.physical;return new x({canvas:i,camera:t,scene:e,physical:n})},createSprites:function(i){var t=i.mapData,e=i.mushroomData,n=this.images,a=U(n,t),s=K(n,e),d=Q(a,n);return{buildings:a,mushroomsBad:s,mushroomsGrow:d}},sceneAddSprite:function(i){var t=!(arguments.length>1&&void 0!==arguments[1])||arguments[1],e=i.buildings,n=i.mushroomsBad,a=i.mushroomsGrow;this.scene.add([].concat(Object(p["a"])(Object.values(a)),Object(p["a"])(Object.values(e)),Object(p["a"])(n),[t&&this.person]))},physicalAddSprite:function(i){var t=!(arguments.length>1&&void 0!==arguments[1])||arguments[1],e=i.buildings,n=i.mushroomsBad,a=i.mushroomsGrow;this.physical.addDynamicSprite([t&&this.person].concat(Object(p["a"])(n))),this.physical.addStaticSprite(e),this.physical.addUnstableSprite(a)},clear:function(){clearTimeout(this.timmer),this.physical.clear(),this.scene.clear(),this.person.clear()},reRender:function(){var i=this;this.ableStartGame=!1,this.timmer=setTimeout((function(){i.ableStartGame=!0,i.render()}),100)},render:function(){this.ableVisiblePerson&&(this.camera.x=Math.max(this.person.x-k.personOffset,0)),this.physical.run(),this.renderer.render(),this.fpsCount++,(!this.prevTimmer||Date.now()-this.prevTimmer>=1e3)&&(this.fps=this.fpsCount,this.fpsCount=0,this.prevTimmer=Date.now()),this.ableStartGame&&requestAnimationFrame(this.render)}}},rt=dt,ut=(e("958c"),Object(d["a"])(rt,y,h,!1,null,null,null)),lt=ut.exports;n["a"].use(o["a"]);var ot=[{path:"/",name:"Home",component:lt}],yt=new o["a"]({routes:ot}),ht=yt,pt=(e("6062"),new Set),ct=function(){var i=Object(ti["a"])(regeneratorRuntime.mark((function i(t){var e;return regeneratorRuntime.wrap((function(i){while(1)switch(i.prev=i.next){case 0:if(pt.has(t)){i.next=8;break}return e=document.createElement("script"),e.setAttribute("src",t),e.setAttribute("data-namespace",t),pt.add(t),document.body.appendChild(e),i.next=8,new Promise((function(i,t){e.onload=i,e.onerror=t}));case 8:case"end":return i.stop()}}),i)})));return function(t){return i.apply(this,arguments)}}(),gt=function(){ct("http://at.alicdn.com/t/font_2353136_xkbqxbixob8.js")},bt=function(){gt()};n["a"].config.productionTip=!1,bt(),new n["a"]({router:ht,render:function(i){return i(l)}}).$mount("#app")},6629:function(i,t,e){"use strict";e("6a16")},"6a16":function(i,t,e){},"7f39":function(i,t,e){},"818b":function(i,t,e){},"85ec":function(i,t,e){},"958c":function(i,t,e){"use strict";e("818b")},"968f":function(i,t,e){},"9e39":function(i,t,e){},a3f8:function(i,t,e){"use strict";e("7f39")},c3eb:function(i,t,e){"use strict";e("9e39")},cd6c:function(i,t,e){"use strict";e("d2e4")},d2e4:function(i,t,e){},e81c:function(i,t,e){}});
//# sourceMappingURL=app.afab1ba1.js.map